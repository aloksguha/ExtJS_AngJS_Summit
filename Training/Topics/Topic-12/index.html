<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>Synerzip's HTML5 Summit</title>
    <link rel="stylesheet" href="/resources/css/main.css"/>
</head>
<body>
<section class='container'>
    <header class='header'>
        <img class='logo' src='/resources/images/synerzip-logo-hi-res.gif'></img>
    </header>
    <a href="/index.html">Return to Main Page</a>
    <hr/>
    <section class="content">
        <article>
            <h1>Building Large Scale Products</h1>
        </article>

        <article>
            <h1><a name="TOC">Table of Contents</a></h1>
            <ul>
                <li><a href="#problems">Problems with Large Scale Products</a></li>
                <li><a href="#large-scale-architecture">Architecture for Large Scale Products</a></li>
                <li><a href="#introduction-aura">Introduction to Aura</a></li>
                <li><a href="#aura-example">Aura Example in KinoEdu</a></li>
            </ul>
            <hr/>
        </article>
        <article>
            <h3 class="topic"><a name="problems">Problems with Large Scale Products</a></h3>

            <p>
                Before we head over to building large scale application, lets see the problems involved
            <ul>
                <li>Large Distributed Team means development processes are fragmented</li>
                <li>No Concrete Base Framework available</li>
                <li>No standard way to extend the Base Framework</li>
                <li>No Clear distinction between Extensions and Widgets and other components</li>
                <li>
                    No Abstractions from lower layers e.g
                    <ul>
                        <li>DOM Manipulation frameworks - Directly using jquery</li>
                        <li>MV* frameworks - Directly using BackBone</li>
                    </ul>
                </li>
                <li>
                    No Life Cycle management of Components
                    <ul>
                        <li>No Life Cycle of Extensions</li>
                        <li>No Life Cycle of Widgets</li>
                    </ul>
                </li>
                <li>No control over what a Component does</li>


            </ul>
            </p>
            <a href="#TOC">Table of Contents</a>
            <hr/>
        </article>
        <article>
            <h3 class="topic"><a name="large-scale-architecture">Architecture for Large Scale Products</a></h3>

            <p>
                <img src="Large-Scale-Product-Design.png" height="50%" width="50%"></img>
            </p>
            <a href="#TOC">Table of Contents</a>
            <hr/>
        </article>
        <article>
            <h3 class="topic"><a name="introduction-aura">Introduction to Aura</a></h3>

            <p>
                <img src="Aura-Rough-Architecture.png" height="50%" width="50%"></img>

            </p>
            <a href="#TOC">Table of Contents</a>
            <hr/>
        </article>
        <article>
            <h3 class="topic"><a name="aura-example">Aura Example in KinoEdu</a></h3>

            <p>
                <b><u>Directory Structure of KinoEdu</u></b>

                <pre class="code">
  public/
  ├── components
  │   ├── aura
  │   ├── ....
  ├── extensions/
  │   ├── aura-ajax.js
  │   ├── aura-app-security.js
  │   ├── ....
  ├── widgets/
  │   ├── dashboard
  │   │    ├── template
  │   │    │    └── dashboard.html
  │   │    └── main.js
  │   │
  │   └── ....
  ├── app.js
  └── index.html

                </pre>

                <b><u>public/app.js</u></b>
                <pre class="code">
define(['components/aura/lib/aura'], function(Aura) {
    Aura()
        .use('extensions/aura-backbone')
        .use('extensions/aura-localstorage')
        .use('extensions/aura-handlebars')
        .use('extensions/aura-ajax')
        .use('extensions/aura-storage')
        .use('extensions/aura-app-security')
        .use('extensions/aura-router')
        .start({ widgets: 'body' }).then(function() {
            console.warn('Aura started...');
        });
});
                </pre>
                <b><u>HTML Snippet</u></b>
                    <pre class="code">
    &lt;body&gt;
        &ltsection data-aura-widget="dashboard"&gt;&lt;/section&gt;
    &lt;/body&gt;
                </pre>
            <b><u>public/extensions/aura-ajax.js</u></b>
                <pre class="code">
define({

    name:"Backbone Ajax Extension",

    require:{
        paths:{
            'jquery':'components/jquery/jquery'
        }
    },

    initialize:function (app) {
        var $ = require('jquery');
        app.sandbox.post = function (url,data,success,failure) {
            $.ajax({
                type: "POST",
                url: url,
                data: JSON.stringify(data),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: success,
                failure: failure
            });
        }
    }

});             </pre>

                <b><u>public/widgets/dashboard/main.js</u></b>
                <pre class="code">
define(['underscore', 'text!./templates/dashboard.html'],
    function (_, DashboardTemplate) {

    return {

        type:'Backbone',
        template:_.template(DashboardTemplate),

        initialize:function () {
            var self = this;
            this.sandbox.on('router', function (path) {
                if (path.indexOf('dashboard')!=-1) {
                    self.$el.show();
                }
                else {
                    self.$el.hide();
                }

            });

            this.sandbox.on('refresh',function(){
                self.fetchDashboardData();
            });
            this.fetchDashboardData();
        },

        render:function (dashboardData) {
            this.html(this.template(dashboardData));
        },
        fetchDashboardData:function(){
            var self = this;
            var dashboardData = null;
            this.sandbox.security.isLoggedIn(function(err,isLoggedIn){
                if(isLoggedIn){
                    dashboardData = [
                        {
                            panelName:"New Courses",
                            widget:"dashboard-new-courses"
                        },
                        {
                            panelName:"Top Courses",
                            widget:"dashboard-top-courses"
                        },
                        {
                            panelName:"Leadership Board",
                            widget:"dashboard-leadership-board"
                        },
                        {
                            panelName:"Friend's Activities",
                            widget:"dashboard-friend-activities"
                        },
                        {
                            panelName:"Progress",
                            widget:"dashboard-progress"
                        },
                        {
                            panelName:"Your Creations",
                            widget:"dashboard-created"
                        }
                    ];
                }
                else{
                    dashboardData = [
                        {
                            panelName:"New Courses",
                            widget:"dashboard-new-courses"
                        },
                        {
                            panelName:"Top Courses",
                            widget:"dashboard-top-courses"
                        },
                        {
                            panelName:"Leadership Board",
                            widget:"dashboard-leadership-board"
                        }
                    ];
                }
                self.render({'dashboardData':dashboardData});

            });

        }




    }
});
                </pre>
                <b><u>public/widgets/dashboard/templates/dashboard.html</u></b>
                <pre class="code">
&lt;div class="row-fluid"&gt;
    &lt;div class="span2 offset8"&gt; Create Course [+]&lt;/div&gt;
&lt;/div&gt;

&lt;% _.each( dashboardData, function( dashboardEntry,index ){
        var rowStart = (index%3 == 0);
        var rowEnd =   rowStart && (index!=0);
%&gt;
&lt;% if(rowEnd){ %&gt;
&lt;/div&gt;
&lt;% } %&gt;
&lt;% if(rowStart){ %&gt;
    &lt;div class="row-fluid"&gt;

&lt;% } %&gt;
        &lt;div class="span4"&gt;

            &lt;div class="dashboard-panel"&gt;
                &lt;h5&gt;&lt;%=dashboardEntry.panelName%&gt;&lt;/h5&gt;
                &lt;section data-aura-widget="&lt;%=dashboardEntry.widget%&gt;"&gt;&lt;/section&gt;
            &lt;/div&gt;
        &lt;/div&gt;




&lt;% }) %&gt;

                </pre>
            </p>
            <a href="#TOC">Table of Contents</a>
            <hr/>
        </article>
    </section>
</section>

</body>
</html>